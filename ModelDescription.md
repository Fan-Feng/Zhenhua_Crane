###振华港机的故障诊断
**归档时间 datetime: 2017/3/14**

振华港机的起重机的故障诊断分析是和数诺科技一起合作的一个项目，主要内容是来建立一个用于诊断起重机故障的模型。建立这个模型主要由以下几部分组成：
    - 数据集的分析
    - 数据预处理
    - 模型的特征工程
    - 模型建立
    
1. 数据集的分析
这个数据集主要分为三部分：Alarm，analog和digit。

Alarm中存储了故障的信息，是一个离散性变量，总共有300+中故障情况，每种故障的频率当然不尽相同。此外，故障的信息是指当故障的状态发生变化时的记录，即当某个故障发生或者消失时都会生成一条数据。因而，这也就说明了任意时刻的故障状态其实都是知道的。
> 在某天15:12检测出了故障A，然后这时就会生成一条记录。接着由于工作人员进行了修理，在16:03故障A被处理了，这时也会生成一条数据。因而，在这两个时间点（timestamp）之间故障的状态都是肯定的。

analog和digit都是一些可能与故障有关的状态参数的记录值，只是analog是连续型数值，而digit是离散型数值。同样，这两个数据集是记录了状态值发生变化是的情况，因而，也可以说，这些参数在任意时刻的状态值都是确定的。

其余在分析时应该需要注意的是，各个**变量的分布**（具体来说，对于连续型变量是分布，离散型变量是频数统计）。还应考虑**数据的质量**问题，数据的质量主要包括：noise,missing value, inconsistent, outliers, duplicate, unrepresentative, precision等等。

最后，也是对于分析这个数据集比较关键的一点，数据集的大小。这个数据集大约有50G，因而，分析这个大的数据是比较复杂的一件事情。比较适合的方法是SQL-数据库查询！！！

2. 数据预处理
数据预处理主要包括以下几个模块：
    **数据清洗**、**数值化**、**共线性去除**、**稀疏性去除**、**分布标准化**
3. 特征工程
特征工程主要的人物是选取那些特征来做自变量，那些来做因变量。
自变量的选取这里涉及几个问题。首先，因变量很多，最终的模型应该用不到这么多，存在选择。特征的选择主要有几种方法，关联度选择法，filter，and wrapper。 其次，这个数据很明显是一个时间序列的数据，因而，要考虑Time series analysis进来。所以要考虑时间序列的模式来匹配数据的结构。时间序列的模式主要有：Auto-regressive, moving average, and Auto-regressive moving average等等。
*时间序列分析是一块内容很多的领域，其建立在随机过程的基础之上。随机过程是一个随机变量序列，之间可能相关，也可能无关，然后根据这些情况就会衍生出非常多种时间序列模型。其中比较重要的一个概念就是“平稳性”。*
但是，由于我不能够确定到底应该考虑多少个过去变量，因而，这一块应该把所有可能的都考虑进来。又太多了，不大现实，在这个初步模型中考虑了1min、5min、20min、1hr等。
这样做，涉及到一个具体实施的问题。因为，50G数据，要找1min、5min、20min、1hr等一系列值，这是一件不容易的事情。因而，最好的策略就是使用**SQL，数据库来实现**

4. 模型训练
这一块其实没有过多要记录的，简单的使用了下xgboost，然后跑了之后结果一般。后续也没有再做什么工作了。

























